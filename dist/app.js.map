{"version":3,"sources":["../server/app.js"],"names":["Koa","require","Router","app","router","json","onerror","bodyparser","logger","debug","path","config","routes","port","process","env","PORT","use","allowedMethods","ctx","next","start","Date","ms","console","log","method","url","get","body","on","err","error","module","exports","listen"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,IAAMC,SAASD,QAAQ,YAAR,CAAf;AACA,IAAME,MAAM,IAAIH,GAAJ,EAAZ;AACA,IAAMI,SAAS,IAAIF,MAAJ,EAAf;;AAEA,IAAMG,OAAOJ,QAAQ,UAAR,CAAb;AACA,IAAMK,UAAUL,QAAQ,aAAR,CAAhB;AACA,IAAMM,aAAaN,QAAQ,gBAAR,CAAnB;AACA,IAAMO,SAASP,QAAQ,YAAR,CAAf;AACA,IAAMQ,QAAQR,QAAQ,OAAR,EAAiB,aAAjB,CAAd;AACA,IAAMS,OAAOT,QAAQ,MAAR,CAAb;;AAEA,IAAMU,SAASV,QAAQ,UAAR,CAAf;AACA,IAAMW,SAASX,QAAQ,UAAR,CAAf;;AAEA,IAAMY,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoBL,OAAOE,IAAxC;;AAGAP,QAAQH,GAAR;;AAGAA,IAAIc,GAAJ,CAAQV,YAAR,EACGU,GADH,CACOZ,MADP,EAEGY,GAFH,CAEOT,QAFP,EAGGS,GAHH,CAGOb,OAAOQ,MAAP,EAHP,EAIGK,GAJH,CAIOb,OAAOc,cAAP,EAJP;;AAOAf,IAAIc,GAAJ;AAAA,wEAAQ,iBAAOE,GAAP,EAAYC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,iBADA,GACQ,IAAIC,IAAJ,EADR;AAAA;AAAA,mBAEAF,MAFA;;AAAA;AAGAG,cAHA,GAGK,IAAID,IAAJ,KAAaD,KAHlB;;AAING,oBAAQC,GAAR,CAAeN,IAAIO,MAAnB,SAA6BP,IAAIQ,GAAjC;;AAJM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAR;;AAAA;AAAA;AAAA;AAAA;;AAOAvB,OAAOwB,GAAP,CAAW,GAAX,EAAgB,UAACT,GAAD,EAAMC,IAAN,EAAe;AAC7BD,MAAIU,IAAJ,GAAW,aAAX;AACD,CAFD;;AAIAjB,OAAOR,MAAP;AACAD,IAAI2B,EAAJ,CAAO,OAAP,EAAgB,UAACC,GAAD,EAAMZ,GAAN,EAAc;AAC5BK,UAAQC,GAAR,CAAYM,GAAZ;AACAvB,SAAOwB,KAAP,CAAa,cAAb,EAA6BD,GAA7B,EAAkCZ,GAAlC;AACD,CAHD;;AAKAc,OAAOC,OAAP,GAAiB/B,IAAIgC,MAAJ,CAAWxB,OAAOE,IAAlB,EAAwB,YAAM;AAC7CW,UAAQC,GAAR,oCAA6Cd,OAAOE,IAApD;AACD,CAFgB,CAAjB","file":"app.js","sourcesContent":["const Koa = require('koa')\nconst Router = require('koa-router')\nconst app = new Koa()\nconst router = new Router()\n\nconst json = require('koa-json')\nconst onerror = require('koa-onerror')\nconst bodyparser = require('koa-bodyparser')\nconst logger = require('koa-logger')\nconst debug = require('debug')('koa2:server')\nconst path = require('path')\n\nconst config = require('./config')\nconst routes = require('./routes')\n\nconst port = process.env.PORT || config.port\n\n// error handler\nonerror(app)\n\n// middlewares\napp.use(bodyparser())\n  .use(json())\n  .use(logger())\n  .use(router.routes())\n  .use(router.allowedMethods())\n\n// logger\napp.use(async (ctx, next) => {\n  const start = new Date()\n  await next()\n  const ms = new Date() - start\n  console.log(`${ctx.method} ${ctx.url} - $ms`)\n})\n\nrouter.get('/', (ctx, next) => {\n  ctx.body = 'Hello World'\n})\n\nroutes(router)\napp.on('error', (err, ctx) => {\n  console.log(err)\n  logger.error('server error', err, ctx)\n})\n\nmodule.exports = app.listen(config.port, () => {\n  console.log(`Listening on http://localhost:${config.port}`)\n})\n"]}