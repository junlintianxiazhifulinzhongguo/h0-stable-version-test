{"version":3,"sources":["../../server/routes/login.js"],"names":["loginController","ctx","next","body","auth_url","console","log","a","accessToken"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOaA,e,WAAAA,e,WADZ,2BAAW,eAAX,C,UAGI,oBAAI,GAAJ,C,UAQA,oBAAI,UAAJ,C,UAQA,oBAAI,eAAJ,C;;;;;;;8BAfKC,G,EAAIC,I,EACV;AACID,gBAAIE,IAAJ,GAAW;AACP,wBAAO;AADA,aAAX;AAGH;;;yCAGgBF,G,EAAIC,I,EACrB;AACID,gBAAIE,IAAJ,GAAW;AACPC;AADO,aAAX;AAGH;;;;iHAG0BH,G,EAAIC,I;;;;;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACD;AACCG,wCAAQC,GAAR,CAAY,IAAZ;AACD;AACCD,wCAAQC,GAAR,CAAY,IAAZ;AACA;AACA;AACA;AACA;;;AAGMC,iC,GAAI;AACN,mDAAe,0CADT;AAEN,oDAAgB,kCAFV;AAGN,iDAAa,OAHP;AAIN,mDAAe,OAJT;AAKN,oDAAgB,0CALV;AAMN,8CAAU;AANJ,iC;;AAQVF,wCAAQC,GAAR,CAAYC,EAAEC,WAAd;AACD;AACCP,oCAAIE,IAAJ,GAAW;AACRI,uCAAI;AADI,iCAAX","file":"login.js","sourcesContent":["import { \r\n    controller,\r\n    get,\r\n    post,\r\n    put,\r\n    del,\r\n    use,\r\n    all\r\n  } from '../lib/decorator'\r\n\r\nimport {  \r\n    auth_url,\r\n    getAccessToken,\r\n    getUserInfo\r\n} from '../service/alipay'\r\n\r\n@controller('/api/v0/login')\r\nexport class loginController\r\n{\r\n    @get(\"/\")\r\n    login(ctx,next)\r\n    {\r\n        ctx.body = {\r\n            \"name\":\"lijun\"\r\n        }\r\n    }\r\n    \r\n    @get(\"/authUrl\")\r\n    getAlipayAuthUrl(ctx,next)\r\n    {\r\n        ctx.body = {\r\n            auth_url\r\n        }\r\n    }\r\n\r\n    @get(\"/authRedirect\")\r\n    async getAlipayAuthUrlById(ctx,next)\r\n    {\r\n        // www.junlintianxiazhifulinzhongguo.top/api/v0/login/authRedirect?app_id=2018123062714467&source=alipay_wallet&scope=auth_user&auth_code=05cfa47b90104c9eae6d760c983dOX57\r\n        // const { app_id,source,scope,auth_code } = ctx.query\r\n        // console.log(auth_code)\r\n        // const { access_token,alipay_user_id,expires_in,re_expires_in,refresh_token,user_id } = await access_token(auth_code)\r\n        // const result = await getUserInfo(access_token)\r\n        // const [ accessToken,alipayUserId,expiresIn,reExpiresIn,refreshToken,userId ] = await access_token(auth_code)\r\n       // const result = await getAccessToken(auth_code)\r\n        console.log(5555)  \r\n       // console.log(result)\r\n        console.log(6666)    \r\n        // ctx.body = {\r\n        //     accessToken\r\n        // }\r\n        // console.log(result.accessToken)\r\n\r\n\r\n        const a = {\r\n            \"accessToken\": \"authusrBa5492ef2af1f4e22ac26bcd3d7f9eX57\",\r\n            \"alipayUserId\": \"20880002728689039857121792515757\",\r\n            \"expiresIn\": 1296000,\r\n            \"reExpiresIn\": 2592000,\r\n            \"refreshToken\": \"authusrB88a548e0513c4ffd8de8ed74c9e1aX57\",\r\n            \"userId\": \"2088902939066578\"\r\n          }\r\n        console.log(a.accessToken)\r\n       // const { accessToken,alipayUserId,expiresIn,reExpiresIn,refreshToken,userId  } = JSON.parse(a)\r\n        ctx.body = {\r\n           a : 11\r\n        }\r\n    }   \r\n}"]}