{"version":3,"sources":["../../server/routes/login.js"],"names":["loginController","ctx","next","body","auth_url","auth_code","accessToken","alipayUserId","expiresIn","reExpiresIn","refreshToken","userId","result"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOaA,e,WAAAA,e,WADZ,2BAAW,eAAX,C,UAGI,oBAAI,GAAJ,C,UAQA,oBAAI,UAAJ,C,UAQA,oBAAI,eAAJ,C;;;;;;;8BAfKC,G,EAAIC,I,EACV;AACID,gBAAIE,IAAJ,GAAW;AACP,wBAAO;AADA,aAAX;AAGH;;;yCAGgBF,G,EAAIC,I,EACrB;AACID,gBAAIE,IAAJ,GAAW;AACPC;AADO,aAAX;AAGH;;;;iHAG0BH,G,EAAIC,I;;;;;;;AAE3B;AACA;;AAEMG,yC,GAAY,kC;;uCACmE,0BAAaA,SAAb,C;;;;AAA7EC,2C,SAAAA,W;AAAYC,4C,SAAAA,Y;AAAaC,yC,SAAAA,S;AAAUC,2C,SAAAA,W;AAAYC,4C,SAAAA,Y;AAAaC,sC,SAAAA,M;;uCAC/C,uBAAUL,WAAV,C;;;AAAfM,sC;;AACNX,oCAAIE,IAAJ,GAAW;AACPS,kDADO;AAEP,4CAAO;AAFA,iCAAX","file":"login.js","sourcesContent":["import { \r\n    controller,\r\n    get,\r\n    post,\r\n    put,\r\n    del,\r\n    use,\r\n    all\r\n  } from '../lib/decorator'\r\n\r\nimport {  \r\n  auth_url,\r\n  access_token,\r\n  user_info\r\n} from '../service/alipay'\r\n\r\n@controller('/api/v0/login')\r\nexport class loginController\r\n{\r\n    @get(\"/\")\r\n    login(ctx,next)\r\n    {\r\n        ctx.body = {\r\n            \"name\":\"lijun\"\r\n        }\r\n    }\r\n    \r\n    @get(\"/authUrl\")\r\n    getAlipayAuthUrl(ctx,next)\r\n    {\r\n        ctx.body = {\r\n            auth_url\r\n        }\r\n    }\r\n\r\n    @get(\"/authRedirect\")\r\n    async getAlipayAuthUrlById(ctx,next)\r\n    {\r\n        // www.junlintianxiazhifulinzhongguo.top/api/v0/login/authRedirect?app_id=2018123062714467&source=alipay_wallet&scope=auth_user&auth_code=05cfa47b90104c9eae6d760c983dOX57\r\n        //const { app_id,source,scope,auth_code } = ctx.query\r\n\r\n        const auth_code = '5268dd2fb0214e51824377435dd6QX57'\r\n        const { accessToken,alipayUserId,expiresIn,reExpiresIn,refreshToken,userId } = await access_token(auth_code)\r\n        const result = await user_info(accessToken)  \r\n        ctx.body = {\r\n            result,\r\n            \"name\":\"111\"\r\n        }\r\n    }   \r\n}"]}